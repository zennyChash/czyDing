<?xml version="1.0" encoding="UTF-8"?>
<pages>
	<joutput id="xnjk_df_ny" name="最大月份" description=""> 
		<jTemplate>
		<![CDATA[
			{
			#if($xnjk_maxny&&$xnjk_maxny.rows.size()>0)
				"latestValidMonth":"$!{xnjk_maxny.rows[0].ny}",
				"format":"Ym" 
			#end
			}
		]]>
		</jTemplate>
		<vDs name="xnjk_maxny" refDtSrc="xnjk_maxny" fields="ny"/>
	</joutput>
	<joutput id="xnjk_year" name="有数据的年" description=""> 
		<jTemplate>
		<![CDATA[
			{
			#if($xnjk_year&&$xnjk_year.rows.size()>0)
				"options":[
					#foreach($row in $xnjk_year.rows)
	   						{"bm":"$!{row.nian}"}#if($velocityCount != $xnjk_year.rows.size()),#end
	   					#end
				],
				"defaultOp":"$!{xnjk_year.rows[0].nian}"
			#end	
			}
		]]>
		</jTemplate>
		<vDs name="xnjk_year" fields="nian">
			<orderBy name = "nian" dir="desc"/>
		</vDs>
	</joutput>
	<joutput id="xnjk_month" name="有数据的月份选项" description=""> 
		<jTemplate>
		<![CDATA[
			{
			#if($xnjk_month&&$xnjk_month.rows.size()>0)
				"options":[
					#foreach($row in $xnjk_month.rows)
	   					{"bm":"$!{row.yue}"}#if($velocityCount != $xnjk_month.rows.size()),#end
	   				#end
				],
				"defaultOp":"$!{xnjk_month.rows[0].yue}"
			#end
			}
		]]>
		</jTemplate>
		<vDs name="xnjk_month" fields="ny,yue">
			<filter name = "nian" refParam="year" value="2018"/>
			<orderBy name = "ny" dir="desc"/>
		</vDs>
	</joutput>
	<joutput id="dzjk_xnjk" name="虚拟金库明细"  description="" > 
		<jTemplate>
		<![CDATA[
			{
				#if($xnjk_detail&&$xnjk_detail.rows.size()>0)
				"chart_ybggys":{"name":"合计","value":"$!{xnjk_detail.total}"},
				"chart_czzsr":{"name":"合计","value":"$!{xnjk_detail.total}"},
				"list_ybggys":[
					#foreach($row in $xnjk_detail.rows)
						#set( $sntq = $!{row.ttax} - 2001 ) 
						#set( $tbzz = $!{row.sszb} + 4.55 )
	   					{"fpbm":"$!{row.czfpbm}","fp":"$!{row.czfp}","bnlj":"$!{row.ttax}","sntq":"$!{sntq}",
	   					"tbzz":"$tbzz","sszb":"$!{row.sszb}","class":"tax_$!{row.czfpbm}"}
	   					#if($velocityCount != $xnjk_detail.rows.size()),#end
	   				#end
	   			],
				"list_czzsr":[
					#foreach($row in $xnjk_detail.rows)
						#set( $sntq = $!{row.ttax} - 1896 ) 
						#set( $tbzz = $!{row.sszb} + 6.12 )
	   					{"fpbm":"$!{row.czfpbm}","fp":"$!{row.czfp}","bnlj":"$!{row.ttax}","sntq":"$!{sntq}",
	   					"tbzz":"$tbzz","sszb":"$!{row.sszb}","class":"tax_$!{row.czfpbm}"}
	   					#if($velocityCount != $xnjk_detail.rows.size()),#end
	   				#end
				]
				#else
				"chart_ybggys":{"name":"合计","value":"68790"},
				"chart_czzsr":{"name":"合计","value":"71209"},
				"list_ybggys":[],
				"list_czzsr":[]
				#end
			}
		]]>
		</jTemplate>
		<vDs name="xnjk_detail" paging="true" fields="czfpbm,czfp,ttax,sszb,xncolor">
			<filter name = "ny" value="201803"/>
			<orderBy name = "czfpbm" dir="asc"/>
		</vDs>
	</joutput>
</pages>

